{"componentChunkName":"component---src-templates-blog-post-js","path":"/gatsby-deployment/","result":{"data":{"site":{"siteMetadata":{"title":"In Some New"}},"markdownRemark":{"id":"a38a697f-eea3-5a7b-bc31-cb5c94e18cef","excerpt":"Recently, I created a blog and a personal webpage using Gatsby. \nThis is a summary how to deploy Gatsby pages to Github. \nI followed the instruction at here…","html":"<p>Recently, I created a blog and a personal webpage using Gatsby.\nThis is a summary how to deploy Gatsby pages to Github.\nI followed the instruction at <a href=\"https://www.gatsbyjs.com/docs/how-gatsby-works-with-github-pages/\">here</a>.</p>\n<h3>Install Gatsby</h3>\n<p>First, install Xcode, npm, node</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">xcode-select --install\nbrew <span class=\"token function\">install</span> node\n<span class=\"token function\">curl</span> -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.1/install.sh <span class=\"token operator\">|</span> <span class=\"token function\">bash</span></code></pre></div>\n<p>Then, install Gatsby CLI</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install -g gatsby-cli</code></pre></div>\n<p>/usr/local/lib/node_modules</p>\n<p>To update the latest version of node.js, I installed <code class=\"language-text\">nvm</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.35.1/install.sh | bash</code></pre></div>\n<p>I checked the latest version by <code class=\"language-text\">nvm ls-remote</code> and update it by <code class=\"language-text\">nvm install [the latest version number]</code>.</p>\n<h3>Install the gh-pages package</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> gh-pages</code></pre></div>\n<p>During install, I encountered Permission issue. It says “Missing write access to /usr/local/lib/node_modules”. To solve this, I run </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo chown -R $USER /usr/local/lib/node_modules</code></pre></div>\n<h3>Start Gatsby</h3>\n<p>Start with </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">gatsby new blog https://github.com/gatsbyjs/gatsby-starter-hello-world</code></pre></div>\n<h3>Configuration</h3>\n<p>If Gatsby blog/webpage will be deployed on username.github.io, then</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"> <span class=\"token property\">\"deploy\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"gatsby build &amp;&amp; gh-pages -d public\"</span></code></pre></div>\n<p>If it will be on a repository, then</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  pathPrefix<span class=\"token operator\">:</span> <span class=\"token string\">\"/reponame\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>and</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"> <span class=\"token property\">\"deploy\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"gatsby build --prefix-paths &amp;&amp; gh-pages -d public\"</span></code></pre></div>\n<h3>Github Pages Setting</h3>\n<p>Run <code class=\"language-text\">shell npm run deploy</code>.\nThe public folder is now copied to the gh-pages branch.\nThe last step is to set gh-pages branch as a github page.\nGo Repository -> Setting -> GitHub Pages -> Source and change Branch: Main to Branch: gh-pages.\nAnd click Save. </p>\n<h3>Plugin for linked files</h3>\n<p>Whenever we build Gatsby, every file in public folder (so that in gh-pages branch) is removed and newly created.\nSo, it is not easy to manage the attached file for posts.\nTo deal with this issue, I added gatsby-remark-copy-linked-files to the configuration file.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    resolve<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-transformer-remark</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-remark-copy-linked-files</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span></code></pre></div>","frontmatter":{"title":"Gatsby Deployment to Github Pages","date":"December 13, 2020","description":null,"category":null}},"previous":{"fields":{"slug":"/2020-09-27-nvim-zathura-setting/"},"frontmatter":{"title":"NeoVim, Vimtex, and Zathura"}},"next":null},"pageContext":{"id":"a38a697f-eea3-5a7b-bc31-cb5c94e18cef","previousPostId":"06125d9c-18d3-5f5a-8f78-14167599a351","nextPostId":null}},"staticQueryHashes":["3000541721"]}